---
import { Menu, ShoppingBag, Info, MapPin } from "lucide-preact";
const baseUrl = import.meta.env.BASE_URL;
---

<div class="md:hidden fixed bottom-6 left-4 right-4 z-50">
    <div
        class="bg-ink text-white border-3 border-white rounded-squircle shadow-hard-lg flex items-center justify-between px-6 py-4"
    >
        <button
            id="mobile-action-menu"
            class="flex flex-col items-center gap-1 hover:text-primary transition-colors cursor-pointer"
        >
            <Menu size={20} />
            <span class="font-heading text-[10px] uppercase">MENU</span>
        </button>
        <div class="w-px h-8 bg-white/20"></div>
        <a
            href={`${baseUrl}order`}
            class="flex flex-col items-center gap-1 hover:text-secondary transition-colors"
        >
            <ShoppingBag size={20} />
            <span class="font-heading text-[10px] uppercase">ORDER</span>
        </a>
        <div
            class="w-16 h-16 bg-primary border-3 border-white rounded-full -mt-12 flex items-center justify-center shadow-hard-sm active:scale-95 transition-transform group"
        >
            <a
                href={baseUrl}
                class="flex items-center justify-center w-full h-full"
            >
                <span
                    class="font-heading text-3xl text-ink group-hover:rotate-12 transition-transform"
                    >B</span
                >
            </a>
        </div>
        <div class="w-px h-8 bg-white/20"></div>
        <a
            href={`${baseUrl}about`}
            class="flex flex-col items-center gap-1 hover:text-accent transition-colors"
        >
            <Info size={20} />
            <span class="font-heading text-[10px] uppercase">INFO</span>
        </a>
        <div class="w-px h-8 bg-white/20"></div>
        <a
            href={`${baseUrl}locations`}
            class="flex flex-col items-center gap-1 hover:text-white transition-colors"
        >
            <MapPin size={20} />
            <span class="font-heading text-[10px] uppercase">MAP</span>
        </a>
    </div>
</div>

<script>
    function initActionBar() {
        const menuBtn = document.getElementById("mobile-action-menu");
        menuBtn?.addEventListener("click", (e) => {
            e.preventDefault();
            window.dispatchEvent(new CustomEvent("boba:toggle-menu"));
        });
    }

    initActionBar();
    document.addEventListener("astro:after-swap", initActionBar);
</script>
